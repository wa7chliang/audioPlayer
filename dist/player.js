!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("player",[],e):"object"==typeof exports?exports.player=e():t.player=e()}(window,function(){return function(t){var e={};function o(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,o),s.l=!0,s.exports}return o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(n,s,function(e){return t[e]}.bind(null,s));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e,o){"use strict";o.r(e);var n,s=t=>{const e={playType:"loop",mutex:!0,errorIng:!0};for(const o in e)e.hasOwnProperty(o)&&!t.hasOwnProperty(o)&&(t[o]=e[o]);return t};const i=[{name:"ended",func:t=>{t.optionList.length>1?t.next():t.play()}},{name:"error",func:t=>{t.options.errorIng&&(t.optionList.length>1?(console.log("next in 2 seconds later"),clearTimeout(n),n=setTimeout(()=>{t.next()},2e3)):console.log("music error"))}}],r=[{key:"playType",notifyCallBack:(t,e)=>{e.songIndex=0,"loop"===t?e.optionList=e.options.songList:"random"===t&&(e.rendomList=e.options.songList.slice(0),e.optionList=e.rendomList.sort(()=>Math.random()>.5?-1:1))}}];function p(t,e){"string"==typeof t.optionList[e]?t.options.self.src=t.optionList[e]:t.options.self.src=t.optionList[e].url}function l(t,e){t.options&&"object"==typeof t.options&&function(t,e,o,n,s){Object.defineProperty(t,e,{get:function(){return o},set:function(t){o=t,function(t,e,o){t&&t(e,o)}(n.notifyCallBack,t,s)}})}(t.options,e.key,t.options[e.key],e,t)}const f=[];var u=class{constructor(t){this.options=s(t),this.songIndex=0,this.buffered,this.rendomList=[],this.optionList=[],this.template(),this.initEvent(),this.initObserver(),f.push(this)}template(){let{el:t,songList:e}=this.options;this.options.self=document.createElement("audio"),this.options.self.controls=!0,"loop"===this.options.playType?this.optionList=e:e.length>1?(this.rendomList=e.slice(0),this.optionList=this.rendomList.sort(()=>Math.random()>.5?-1:1)):this.optionList=e,"string"==typeof this.optionList[this.songIndex]?this.options.self.src=this.optionList[this.songIndex]:this.options.self.src=this.optionList[this.songIndex].url,document.querySelector(t).appendChild(this.options.self),this.options.self.style.display="none"}play(){if(this.options.self.play(),this.options.mutex)for(let t=0;t<f.length;t++)this!==f[t]&&f[t].pause()}pause(){this.options.self.pause()}toggle(){this.options.self.paused?this.play():this.pause()}initEvent(){let t=this;for(let e=0;e<i.length;e++)this.options.self.addEventListener(i[e].name,()=>{i[e].func(t)})}initObserver(){for(let t=0;t<r.length;t++)l(this,r[t])}next(){this.pause(),this.songIndex<this.optionList.length-1?p(this,++this.songIndex):p(this,this.songIndex=0),this.play()}prev(){this.pause(),0!==this.songIndex?p(this,--this.songIndex):p(this,this.songIndex=this.optionList.length-1),this.play()}getBufferedPercent(){return this.options.self.buffered.length?Math.floor(100*this.options.self.buffered.end(this.options.self.buffered.length-1)/this.options.self.duration):0}getCurrentTimePercent(){return this.options.self.duration?Math.floor(100*this.options.self.currentTime/this.options.self.duration):0}};e.default=u}])});
//# sourceMappingURL=player.js.map